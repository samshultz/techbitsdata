language: python
python:
  - 3.8
services:
    - postgresql
install:
    - pip install -r requirements.txt
before_script:
    - python manage.py migrate
    - python manage.py collectstatic --no-input
script:
    - pytest
branches:
  only:
    - main
    - dev
deploy:
  provider: heroku
  api_key: $HEROKU_API_KEY
  run: "python manage.py migrate"
  app:
    main: techbitsdata
    dev: techbitsdata-staging

